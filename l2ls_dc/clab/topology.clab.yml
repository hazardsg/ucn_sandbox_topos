---
name: l2ls_dc
prefix: ""

mgmt:
  network: mgmt
  ipv4-subnet: 172.100.100.0/24

topology:

  defaults:
    env:
      INTFTYPE: et

  kinds:
    ceos:
      image: arista/ceos:latest
    linux:
      image: ghcr.io/aristanetworks/aclabs/host-ubuntu:rev1.1

  nodes:
    SPINE_1:
      kind: arista_ceos
      image: arista/ceos:latest
      mgmt-ipv4: 172.100.100.11
      # binds:
      #   - sn/spine_1.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/SPINE_1.cfg
    SPINE_2:
      kind: arista_ceos
      image: arista/ceos:latest
      mgmt-ipv4: 172.100.100.12
      # binds:
      #   - sn/spine_2.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/SPINE_2.cfg
    LEAF_1A:
      kind: arista_ceos
      image: arista/ceos:latest
      mgmt-ipv4: 172.100.100.13
      # binds:
      #   - sn/leaf_1a.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/LEAF_1A.cfg
    LEAF_1B:
      kind: arista_ceos
      image: arista/ceos:latest
      mgmt-ipv4: 172.100.100.14
      # binds:
      #   - sn/leaf_1b.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/LEAF_1B.cfg
    LEAF_2A:
      kind: arista_ceos
      image: arista/ceos:latest
      mgmt-ipv4: 172.100.100.15
      # binds:
      #   - sn/leaf_2a.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/LEAF_2A.cfg
    LEAF_2B:
      kind: arista_ceos
      image: arista/ceos:latest
      mgmt-ipv4: 172.100.100.16
      # binds:
      #   - sn/leaf_2b.txt:/mnt/flash/ceos-config:ro
      startup-config: init-configs/LEAF_2B.cfg
    HOST1:
      kind: linux
      mgmt-ipv4: 172.100.100.17
      env:
        IPV4: 10.10.10.101/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.10.10.1
        UPLINK_MAC: 00:01:01:00:00:01
        TMODE: lacp
    HOST2:
      kind: linux
      mgmt-ipv4: 172.100.100.18
      env:
        IPV4: 10.20.20.102/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.20.20.1
        UPLINK_MAC: 00:01:01:00:00:02
        TMODE: lacp
    HOST3:
      kind: linux
      mgmt-ipv4: 172.100.100.19
      env:
        IPV4: 10.10.10.103/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.10.10.1
        UPLINK_MAC: 00:01:01:00:00:03
        TMODE: lacp
    HOST4:
      kind: linux
      mgmt-ipv4: 172.100.100.20
      env:
        IPV4: 10.30.30.104/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.30.30.1
        UPLINK_MAC: 00:01:01:00:00:04
        TMODE: lacp

  links:
    - endpoints: [ "SPINE_1:et1", "SPINE_2:et1" ]
    - endpoints: [ "SPINE_1:et2", "SPINE_2:et2" ]
    - endpoints: [ "LEAF_1A:et1", "LEAF_1B:et1" ]
    - endpoints: [ "LEAF_1A:et2", "LEAF_1B:et2" ]
    - endpoints: [ "LEAF_2A:et1", "LEAF_2B:et1" ]
    - endpoints: [ "LEAF_2A:et2", "LEAF_2B:et2" ]
    - endpoints: [ "SPINE_1:et3", "LEAF_1A:et3" ]
    - endpoints: [ "SPINE_1:et4", "LEAF_1B:et3" ]
    - endpoints: [ "SPINE_1:et5", "LEAF_2A:et3" ]
    - endpoints: [ "SPINE_1:et6", "LEAF_2B:et3" ]
    - endpoints: [ "SPINE_2:et3", "LEAF_1A:et4" ]
    - endpoints: [ "SPINE_2:et4", "LEAF_1B:et4" ]
    - endpoints: [ "SPINE_2:et5", "LEAF_2A:et4" ]
    - endpoints: [ "SPINE_2:et6", "LEAF_2B:et4" ]
    - endpoints: [ "LEAF_1A:et5", "HOST1:eth1" ]
    - endpoints: [ "LEAF_1B:et5", "HOST1:eth2" ]
    - endpoints: [ "LEAF_1A:et6", "HOST2:eth1" ]
    - endpoints: [ "LEAF_1B:et6", "HOST2:eth2" ]
    - endpoints: [ "LEAF_2A:et5", "HOST3:eth1" ]
    - endpoints: [ "LEAF_2B:et5", "HOST3:eth2" ]
    - endpoints: [ "LEAF_2A:et6", "HOST4:eth1" ]
    - endpoints: [ "LEAF_2B:et6", "HOST4:eth2" ]
